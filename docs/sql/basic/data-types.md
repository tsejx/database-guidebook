---
nav:
  title: SQL
  order: 2
group:
  title: 基础语法
  order: 2
title: 数据类型
order: 2
---

# 数据类型

SQL 标准支持多种固有类型。

每种类型都可能包含一个被称作空值的特殊值。空值表示一个缺失的值，该值可能存在但并不为人所知，或者可能根本不存在。在可能的情况下，我们希望禁止加入空值，正如我们马上将看到的那样。

## 字符串类型

| 类型       | 大小(Bytes)  | 用途                            |
| :--------- | :----------- | :------------------------------ |
| CHAR       | 0-255        | 定长字符串                      |
| VARCHAR    | 0-65535      | 可变长字符串                    |
| TINYTEXT   | 0-255        | 短文本字符串                    |
| TEXT       | 0-65535      | 长文本数据                      |
| MEDIUMTEXT | 0-16777215   | 中等长度文本数据                |
| LONGTEXT   | 0-4294967295 | 极大文本数据                    |
| TINYBLOB   | 0-255        | 不超过 255 个字符的二进制字符串 |
| BLOB       | 0-65535      | 二进制形式的长文本数据          |
| MEDIUMBLOB | 0-16777215   | 二进制形式的中等长度文本数据    |
| LONGBLOB   | 0-4294967295 | 二进制形式的极大文本数据        |

> Q: CHAR 和 VARCHAR 的区别？

1. `CHAR(n)` 是固定长度，`VARCHAR(n)` 长度可变：
2. `CHAR(n)` 和 `VARCHAR(n)` 中括号中 `n` 代表字符的个数，并不代表字节个数，比如 `CHAR(30)` 就可以存储 30 个字符。
   1. `CHAR(n)` 若存入字符数小于 `n`，则以空格补于其后，查询之时再将空格去掉，所以 `CHAR` 类型存储的字符串末尾不能有空格。
   2. `VARCHAR` 若存储内容超出设置长度，内容将被截断

存储时，前者不管实际存储数据的长度，直接按 `CHAR` 规定的长度分配存储空间；而后者会根据实际存储的数据分配最终的存储空间

相同点：

1. `CHAR(n)`、`VARCHAR(n)` 中的 `n` 都代表字符的个数
2. 超过 `CHAR(n)`、`VARCHAR(n)` 最大长度 n 的限制后，字符串会被截断。

不同点：

1. char 不论实际存储的字符数都会占用 n 个字符的空间，而 varchar 只会占用实际字符应该占用的字节空间加 1（实际长度 length，0<=length<255）或加 2（length>255）。因为 varchar 保存数据时除了要保存字符串之外还会加一个字节来记录长度（如果列声明长度大于 255 则使用两个字节来保存长度）。
2. 能存储的最大空间限制不一样：char 的存储上限为 255 字节。
3. char 在存储时会截断尾部的空格，而 varchar 不会。

char 是适合存储很短的、一般固定长度的字符串。例如，char 非常适合存储密码的 MD5 值，因为这是一个定长的值。对于非常短的列，char 比 varchar 在存储空间上也更有效率。

> Q: 列的字符串类型可以是什么？

字符串类型是：SET、BLOB、ENUM、CHAR、TEXT、VARCHAR

> Q: BLOB 和 TEXT 有什么区别？

1. BLOB 是一个二进制对象，可以容纳可变数量的数据。有四种类型的 BLOB：TINYBLOB、BLOB、MEDIUMBLO 和 LONGBLOB
2. TEXT 是一个不区分大小写的 BLOB。四种 TEXT 类型：TINYTEXT、TEXT、MEDIUMTEXT 和 LONGTEXT。
3. BLOB 保存二进制数据，TEXT 保存字符数据。

### 字符字节参考表

| 编码字符                | 一个字母 | 一个中文字符 | 字母标点 | 中文标点 |
| :---------------------- | :------- | :----------- | :------- | :------- |
| ASCII 码                | 1 字节   |              |          |          |
| UTF-8 编码              | 1 字节   | 3 字节       | 1 字节   | 3 字节   |
| Unicdoe 编码            | 2 字节   | 2 字节       | 2 字节   | 2 字节   |
| GB 2312 编码或 GBK 编码 | 1 字节   | 2 字节       | 1 字节   | 2 字节   |
| UTF-16                  | 2 字节   | 2 字节       | 2 字节   | 2 字节   |
| UTF-32                  | 4 字节   | 4 字节       | 4 字节   | 4 字节   |
| Latin1                  | 1 字节   |              | 1 字节   |          |

## 数值类型

### 整数类型

| 类型           | 有符号                            | 无符号        | 大小（Bytes） | 用途           |
| :------------- | :-------------------------------- | :------------ | :------------ | :------------- |
| TINYINT        | `(-128, 127)`                     | `[0, 255]`    | 1             | 非常小的整数值 |
| SMALLINT       | `(-32768, 32767)`                 | `[0, 65535]`  | 2             | 较小的整数值   |
| MEDIUMINT      | `-8388608, 8388607`               | `[0, 2^24-1]` | 3             | 中等大小整数值 |
| INT 或 INTEGER | `(-2 147 483 648，2 147 483 647)` | `[0, 2^32-1]` | 4             | 标准整数       |
| BIGINT         |                                   | `[0, 2^64-1]` | 8             | 较大整数值     |

### 小数类型

| 类型          | 有符号               | 无符号 | 大小（Bytes） | 用途                                         |
| :------------ | :------------------- | :----- | :------------ | :------------------------------------------- |
| FLOAT         |                      |        | 4             | 单精度<br/>浮点数值                          |
| DOUBLE        |                      |        | 8             | 双精度<br/>浮点数值                          |
| DECIMAL(M, D) | `依赖于 M 和 D 的值` |        | m             | 可以存储大整数或高精度，可以理解为字符串处理 |

### UNSIGNED

`UNSIGNED` 属性只针对整型，表示无符号的意思（相当于禁用负值）。

取值范围如果加了 `UNSIGNED`，则最大值翻倍，例如，`TINYINT` 类型最大是 127，那 `TINYINT UNSIGNED` 最大就可以到 `127 * 2 => 255`。

## 日期和时间类型

每个时间类型有一个有效值范围和一个”零“值，当指定不合法的 MySQL 不能表示的值时使用”零“值。

| 类型      | 大小（Bytes） | 范围                                      | 格式                | 用途                     |
| :-------- | :------------ | :---------------------------------------- | :------------------ | :----------------------- |
| DATE      | 3             | 1000-01-01 / 9999-12-31                   | YYYY-MM-DD          | 日期值                   |
| TIME      | 3             | -838：59:59 / 838:59:59                   | HH:MM:SS            | 时间值或持续时间         |
| YEAR      | 1             | 1901 / 2155                               | YYYY                | 年份值                   |
| DATETIME  | 8             | 1000-01-01 00:00:00 / 9999-12-31 23:59:59 | YYYY-MM-DD HH:MM:SS | 混合日期和时间值         |
| TIMESTAMP | 4             | 1970-01-01 00:00:00 / 2038                | YYYYMMDD HHMMSS     | 混合日期和时间值，时间戳 |

## 参考资料

- [MySQL 中 datetime 和 timstamp 的区别与选择](https://segmentfault.com/a/1190000017393602)
