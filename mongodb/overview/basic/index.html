<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico" />
    <link rel="stylesheet" href="/database-guidebook/umi.css" />
    <script>
      window.routerBase = "/database-guidebook/";
    </script>
    <script>
      //! umi version: 3.5.34
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.indexOf(e) > -1 ? e : r[0]
        );
      })();
    </script>
    <title>基本概述 - Database Guidebook</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/mongodb/overview/basic" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/database-guidebook-favicon.png&#x27;)" href="/database-guidebook//">Database Guidebook</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span><a href="/database-guidebook//basic">基础</a></span><span><a href="/database-guidebook//mysql">MySQL</a></span><span><a aria-current="page" class="active" href="/database-guidebook//mongodb">MongoDB</a></span><span><a href="/database-guidebook//redis">Redis</a></span><span><a href="/database-guidebook//extensions">Extensions</a></span><span><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/database-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><div class="__dumi-default-navbar-tool"><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;http://img.mrsingsing.com/database-guidebook-favicon.png&#x27;)" href="/database-guidebook//"></a><h1>Database Guidebook</h1><p>Database 完全知识体系</p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a href="/database-guidebook//basic">基础</a></li><li><a href="/database-guidebook//mysql">MySQL</a></li><li><a aria-current="page" class="active" href="/database-guidebook//mongodb">MongoDB</a></li><li><a href="/database-guidebook//redis">Redis</a></li><li><a href="/database-guidebook//extensions">Extensions</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/database-guidebook">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a target="_blank" rel="noopener noreferrer">基本概述</a><ul><li><a aria-current="page" class="active" href="/database-guidebook//mongodb/overview/basic"><span>基本概述</span></a></li><li><a href="/database-guidebook//mongodb/overview/installment"><span>安裝使用</span></a></li></ul></li><li><a target="_blank" rel="noopener noreferrer">高阶应用</a><ul><li><a href="/database-guidebook//mongodb/advanced/authentication"><span>鉴权</span></a></li><li><a href="/database-guidebook//mongodb/advanced/backup-and-recovery"><span>备份与恢复</span></a></li><li><a href="/database-guidebook//mongodb/advanced/replication"><span>数据库副本集</span></a></li><li><a href="/database-guidebook//mongodb/advanced/security"><span>数据库安全</span></a></li><li><a href="/database-guidebook//mongodb/advanced/sharding"><span>数据库分片</span></a></li></ul></li><li><a target="_blank" rel="noopener noreferrer">Mongoose</a><ul><li><a href="/database-guidebook//mongodb/mongoose/overview"><span>概述</span></a></li><li><a href="/database-guidebook//mongodb/mongoose/connections"><span>连接 Connections</span></a></li><li><a href="/database-guidebook//mongodb/mongoose/schema-types"><span>模式类型 SchemaTypes</span></a></li><li><a href="/database-guidebook//mongodb/mongoose/model-api"><span>Model</span></a></li><li><a href="/database-guidebook//mongodb/mongoose/queries"><span>普通查询</span></a></li><li><a href="/database-guidebook//mongodb/mongoose/populate"><span>填充查询</span></a></li><li><a href="/database-guidebook//mongodb/mongoose/aggregate"><span>聚合查询</span></a></li><li><a href="/database-guidebook//mongodb/mongoose/hooks"><span>钩子函数</span></a></li><li><a href="/database-guidebook//mongodb/mongoose/middleware"><span>中间件 Middleware</span></a></li><li><a href="/database-guidebook//mongodb/mongoose/plugins"><span>插件</span></a></li><li><a href="/database-guidebook//mongodb/mongoose/validation"><span>验证</span></a></li><li><a href="/database-guidebook//mongodb/mongoose/basic"><span>集成</span></a></li></ul></li><li><a target="_blank" rel="noopener noreferrer">基本操作</a><ul><li><a href="/database-guidebook//mongodb/basic/documents"><span>文档 Documents</span></a></li><li><a href="/database-guidebook//mongodb/other/command"><span>命令大全</span></a></li><li><a href="/database-guidebook//mongodb/basic/models"><span>模型 Models</span></a></li><li><a href="/database-guidebook//mongodb/other/utils"><span>工具大全</span></a></li><li><a href="/database-guidebook//mongodb/basic/schemas"><span>模式 Schema</span></a></li><li><a href="/database-guidebook//mongodb/basic/indexes"><span>数据库索引</span></a></li><li><a href="/database-guidebook//mongodb/basic/models-relationship"><span>数据模型关联</span></a></li><li><a href="/database-guidebook//mongodb/basic/aggregation"><span>聚合管道</span></a></li><li><a href="/database-guidebook//mongodb/basic/subdocuments"><span>子文档 Subdocuments</span></a></li><li><a href="/database-guidebook//mongodb/other/mongodb"><span>扩展资料</span></a></li></ul></li><li><a href="/database-guidebook//mongodb/overview">基本概述</a><ul><li><a href="/database-guidebook//mongodb/overview/administration"><span>数据库管理</span></a></li><li><a href="/database-guidebook//mongodb/overview/configuration"><span>配置文件</span></a></li></ul></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="术语概念" data-depth="2"><a href="/database-guidebook//mongodb/overview/basic#术语概念"><span>术语概念</span></a></li><li title="使用场景" data-depth="2"><a href="/database-guidebook//mongodb/overview/basic#使用场景"><span>使用场景</span></a></li><li title="数据库" data-depth="2"><a href="/database-guidebook//mongodb/overview/basic#数据库"><span>数据库</span></a></li><li title="文档" data-depth="2"><a href="/database-guidebook//mongodb/overview/basic#文档"><span>文档</span></a></li><li title="集合" data-depth="2"><a href="/database-guidebook//mongodb/overview/basic#集合"><span>集合</span></a></li><li title="合法的集合名" data-depth="3"><a href="/database-guidebook//mongodb/overview/basic#合法的集合名"><span>合法的集合名</span></a></li><li title="元数据" data-depth="2"><a href="/database-guidebook//mongodb/overview/basic#元数据"><span>元数据</span></a></li><li title="数据类型" data-depth="2"><a href="/database-guidebook//mongodb/overview/basic#数据类型"><span>数据类型</span></a></li><li title="文档主键" data-depth="3"><a href="/database-guidebook//mongodb/overview/basic#文档主键"><span>文档主键</span></a></li><li title="对象主键" data-depth="3"><a href="/database-guidebook//mongodb/overview/basic#对象主键"><span>对象主键</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h1 id="基本概述"><a aria-hidden="true" tabindex="-1" href="/database-guidebook//mongodb/overview/basic#基本概述"><span class="icon icon-link"></span></a>基本概述</h1><p><strong>Mongo</strong> 来源于 Humongous 意为「庞大」。</p><p>面向文档存储的开源数据库：</p><ul><li>性能好（内存计算）</li><li>大规模数据存储（可拓展性）</li><li>可靠安全（本地复制、自动故障转移）</li><li>方便存储复杂数据结构（Schema Free）</li></ul><p>MongoDB 是一个基于分布式文件存储的开源文档数据库。由 C++ 语言编写。旨在为 Web 应用提供高性能、高可用性和高伸缩数据存储解决方案。</p><h2 id="术语概念"><a aria-hidden="true" tabindex="-1" href="/database-guidebook//mongodb/overview/basic#术语概念"><span class="icon icon-link"></span></a>术语概念</h2><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th>关系型数据库术语</th><th>MongoDB 术语</th><th>说明</th></tr></thead><tbody><tr><td>database</td><td>database</td><td>数据库</td></tr><tr><td>table</td><td>collection</td><td>数据库表 / 集合</td></tr><tr><td>row</td><td>document</td><td>记录行 / 文档</td></tr><tr><td>column</td><td>fIeld</td><td>数据字段 / 域</td></tr><tr><td>index</td><td>index</td><td>索引</td></tr><tr><td>primary key</td><td>primary key</td><td>主键，MongoDB 自动将 <code>_id</code> 字段设置为主键</td></tr></tbody></table></div></div><h2 id="使用场景"><a aria-hidden="true" tabindex="-1" href="/database-guidebook//mongodb/overview/basic#使用场景"><span class="icon icon-link"></span></a>使用场景</h2></div><img alt="MongoDB优点" src="/database-guidebook/static/mongodb-advantage.33ad8793.png" width="480"/><div class="markdown"><ul><li><strong>数据缓存</strong>：由于性能很高，MongoDB 适合作为信息基础设施的缓存层。在系统重启之后，由 MongoDB 搭建的持久化缓存层可以避免下层的数据源过载。</li><li><strong>对象和 JSON 存储</strong>：MongoDB 的 BSON(二进制 JSON)数据格式非常适合文档化格式的存储及查询,而且 JSON 格式存储最接近真实对象模型，对开发者友好，方便快速开发迭代,灵活的模式让你不在为了不断变化的需求而去频繁修改数据库字段和结构。</li><li><strong>高伸缩性场景</strong>：MongoDB 通过分片集群，使 MongoDB 服务能力易于水平扩展。</li><li><strong>弱事务类型业务</strong>：MongoDB 不支持多文档事务，所以像银行系统这种需要大量原子性复杂事务的程序不适合使用 MongoDB。（注：MongoDB 4.0 将支持跨文档的事务）。</li></ul><h2 id="数据库"><a aria-hidden="true" tabindex="-1" href="/database-guidebook//mongodb/overview/basic#数据库"><span class="icon icon-link"></span></a>数据库</h2><p>一个 MongoDB 中可以建立多个数据库。</p><p>MongoDB 的默认数据库为 <code>&quot;db&quot;</code>，该数据库存储在 <code>data</code> 目录中。</p><p>MongoDB 的单个实例可以容纳多个独立的数据库，每一个都有自己的集合和权限，不同的数据库也放置在不同的文件中。</p><p>数据库也通过名字来标识。数据库名可以是满足以下条件的任意 UTF-8 字符串。</p><ul><li>不能是空字符串（<code>&quot;&quot;</code>)。</li><li>不得含有 <code>&#x27; &#x27;</code>（空格)、<code>.</code>、<code>$</code>、<code>/</code>、<code>\</code> 和 \0` (空字符)。</li><li>应全部小写。</li><li>最多 64 字节。</li></ul><p>有一些数据库名是保留的，可以直接访问这些有特殊作用的数据库。</p><ul><li><strong>admin</strong>： 从权限的角度来看，这是 <code>&quot;root&quot;</code> 数据库。要是将一个用户添加到这个数据库，这个用户自动继承所有数据库的权限。一些特定的服务器端命令也只能从这个数据库运行，比如列出所有的数据库或者关闭服务器。</li><li><strong>local:</strong> 这个数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合</li><li><strong>config</strong>: 当 Mongo 用于分片设置时，config 数据库在内部使用，用于保存分片的相关信息。</li></ul><h2 id="文档"><a aria-hidden="true" tabindex="-1" href="/database-guidebook//mongodb/overview/basic#文档"><span class="icon icon-link"></span></a>文档</h2><p>文档是一组键值（key-value）对（即 BSON）。MongoDB 的文档不需要设置相同的字段，并且相同的字段不需要相同的数据类型，这与关系型数据库有很大的区别，也是 MongoDB 非常突出的特点。</p><p>🌰 <strong>示例：</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">{</span><span class="token string-property property">&quot;site&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;www.mrsingsing.com&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&quot;MongoDB&quot;</span><span class="token punctuation">}</span></div></pre></div><p>下表列出了 RDBMS 与 MongoDB 对应的术语：</p><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th>RDBMS</th><th>MongoDB</th></tr></thead><tbody><tr><td>数据库</td><td>数据库</td></tr><tr><td>表格</td><td>集合</td></tr><tr><td>行</td><td>文档</td></tr><tr><td>列</td><td>字段</td></tr><tr><td>表联合</td><td>潜入文档</td></tr><tr><td>主键</td><td>主键（MongoDB 提供了 <code>key</code> 为 <code>_id</code>）</td></tr></tbody></table></div></div><p>需要注意的是：</p><ol><li>文档中的键/值对是有序的</li><li>文档中的值不仅可以是在双引号里面的字符串，还可以是其他几种数据类型（甚至可以是整个嵌入的文档)。</li><li>MongoDB 区分类型和大小写。</li><li>MongoDB 的文档不能有重复的键。</li><li>文档的键是字符串。除了少数例外情况，键可以使用任意 UTF-8 字符。</li></ol><p>文档键命名规范：</p><ul><li>键不能含有 <code>0</code> (空字符)。这个字符用来表示键的结尾。</li><li><code>.</code> 和 <code>$</code> 有特别的意义，只有在特定环境下才能使用。</li><li>以下划线 <code>_</code> 开头的键是保留的（不是严格要求的）。</li></ul><h2 id="集合"><a aria-hidden="true" tabindex="-1" href="/database-guidebook//mongodb/overview/basic#集合"><span class="icon icon-link"></span></a>集合</h2><p>集合就是 MongoDB 文档组，类似于 RDBMS （关系数据库管理系统：Relational Database Management System）中的表格。</p><p>集合存在于数据库中，集合没有固定的结构，这意味着你在对集合可以插入不同格式和类型的数据，但通常情况下我们插入集合的数据都会有一定的关联性。</p><h3 id="合法的集合名"><a aria-hidden="true" tabindex="-1" href="/database-guidebook//mongodb/overview/basic#合法的集合名"><span class="icon icon-link"></span></a>合法的集合名</h3><ul><li><p>集合名不能是空字符串 <code>&quot;&quot;</code></p></li><li><p>集合名不能含有 <code>\0</code> 字符（空字符)，这个字符表示集合名的结尾</p></li><li><p>集合不能以 <code>system.</code> 开头，这是为系统集合保留的前缀</p></li><li><p>用户创建的集合名字不能含有保留字符。有些驱动程序的确支持在集合名里面包含，这是因为某些系统生成的集合中包含该字符。除非你要访问这种系统创建的集合，否则千万不要在名字里出现 <code>$</code></p></li><li><p>关系型数据库中的表（table）中的每一条数据（row）的格式是事先约定好的的，而 MongoDB 中的集合（collection）中文档（document）的数据格式是不固定的，也就是说我们可以将如下数据插入统一文档中。</p></li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">{</span><span class="token string-property property">&quot;site&quot;</span><span class="token operator">:</span><span class="token string">&quot;www.wuhuan.me&quot;</span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">{</span><span class="token string-property property">&quot;site&quot;</span><span class="token operator">:</span><span class="token string">&quot;www.baidu.com&quot;</span><span class="token punctuation">,</span><span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span><span class="token string">&quot;百度&quot;</span><span class="token punctuation">}</span></div></pre></div><h2 id="元数据"><a aria-hidden="true" tabindex="-1" href="/database-guidebook//mongodb/overview/basic#元数据"><span class="icon icon-link"></span></a>元数据</h2><p>数据库的信息是存储在集合中。它们使用了系统的命名空间：</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">dbname.system.*</span></div></pre></div><p>在 MongoDB 数据库中名字空间 <code>&lt;dbname&gt;.system.*</code> 是包含多种系统信息的特殊集合(Collection)，如下：</p><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th>集合命名空间</th><th>描述</th></tr></thead><tbody><tr><td>dbname.system.namespaces</td><td>列出所有名字空间</td></tr><tr><td>dbname.system.indexes</td><td>列出所有索引</td></tr><tr><td>dbname.system.profile</td><td>包含数据库概要（profile）信息</td></tr><tr><td>dbname.system.users</td><td>列出所有可访问数据库的用户</td></tr><tr><td>dbname.local.sources</td><td>包含复制对端（slave）的服务器信息和状态</td></tr></tbody></table></div></div><p>对于修改系统集合中的对象有如下限制。</p><p>在 <code>{<!-- -->{<!-- -->system.indexes<!-- -->}<!-- -->}</code> 插入数据，可以创建索引。但除此之外该表信息是不可变的（特殊的 drop index 命令将自动更新相关信息）。</p><p><code>{<!-- -->{<!-- -->system.users<!-- -->}<!-- -->}</code> 是可修改的。 <code>{<!-- -->{<!-- -->system.profile<!-- -->}<!-- -->}</code> 是可删除的。</p><h2 id="数据类型"><a aria-hidden="true" tabindex="-1" href="/database-guidebook//mongodb/overview/basic#数据类型"><span class="icon icon-link"></span></a>数据类型</h2><div class="__dumi-default-table"><div class="__dumi-default-table-content"><table><thead><tr><th>数据类型</th><th>说明</th></tr></thead><tbody><tr><td>String</td><td>字符串。存储数据常用的数据类型。在 MongoDB 中，UTF-8 编码的字符串才是合法的。</td></tr><tr><td>Integer</td><td>整型数值。用于存储数值。根据你所采用的服务器，可分为 32 位或 64 位。</td></tr><tr><td>Boolean</td><td>布尔值。用于存储布尔值（真/假）。</td></tr><tr><td>Double</td><td>双精度浮点值。用于存储浮点值。</td></tr><tr><td>Min/Max keys</td><td>将一个值与 BSON（二进制的 JSON）元素的最低值和最高值相对比。</td></tr><tr><td>Array</td><td>用于将数组或列表或多个值存储为一个键。</td></tr><tr><td>Timestamp</td><td>时间戳。记录文档修改或添加的具体时间。</td></tr><tr><td>Object</td><td>用于内嵌文档。</td></tr><tr><td>Null</td><td>用于创建空值。</td></tr><tr><td>Symbol</td><td>符号。该数据类型基本上等同于字符串类型，但不同的是，它一般用于采用特殊符号类型的语言。</td></tr><tr><td>Date</td><td>日期时间。用 UNIX 时间格式来存储当前日期或时间。你可以指定自己的日期时间：创建 Date 对象，传入年月日信息。</td></tr><tr><td>Object ID</td><td>对象 ID。用于创建文档的 ID。</td></tr><tr><td>Binary Data</td><td>二进制数据。用于存储二进制数据。</td></tr><tr><td>Code</td><td>代码类型。用于在文档中存储 JavaScript 代码。</td></tr><tr><td>Regular express</td><td>正则表达式类型。用于存储正则表达式。</td></tr></tbody></table></div></div><h3 id="文档主键"><a aria-hidden="true" tabindex="-1" href="/database-guidebook//mongodb/overview/basic#文档主键"><span class="icon icon-link"></span></a>文档主键</h3><ul><li>文档的主键的唯一性</li><li>支持所有数据类型（数组除外）</li><li>复合主键</li></ul><h3 id="对象主键"><a aria-hidden="true" tabindex="-1" href="/database-guidebook//mongodb/overview/basic#对象主键"><span class="icon icon-link"></span></a>对象主键</h3><p>MongoDB 文档必须有一个<strong>默认</strong>的 <code>_id</code> 键（默认的文档主键），且在一个集合里 <code>_id</code> 始终唯一。<code>_id</code> 键可以是任何类型的，默认是个 <strong>ObjectId</strong> 对象，它由 MongoDB 数据库自动创建。MongoDB 使用 ObjectId 而不是使用常规做法（自增主键）主要原因是，在多个服务器（分布式）同步自动增加主键费力费时。</p><p>ObjectId 由 12 个字节的 BSON 组成：</p><ul><li>前 4 个字节表示时间戳（如果多个文档同秒钟存储到数据库，对象主键精确度无法区分先后顺序；服务端创建，如果服务端时间不同也会有区别）</li><li>接下来的 3 个字节是机器标识码</li><li>紧接的两个字节由进程 id 组成（PID）</li><li>最后三个字节是随机数</li></ul><p><strong>创建新的 ObjectId</strong></p><p>我们可以在命令行通过如下语句来创建一个新的 ObjectId</p><div class="__dumi-default-code-block"><pre class="prism-code language-bash"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token operator">&gt;</span><span class="token plain"> newId </span><span class="token operator">=</span><span class="token plain"> ObjectId</span><span class="token punctuation">(</span><span class="token punctuation">)</span></div></pre></div><p>上面语句将返回一个唯一 <code>_id</code></p></div><div class="__dumi-default-layout-footer-meta"><a target="_blank" rel="noopener noreferrer" href="https://github.com/tsejx/database-guidebook/edit/master/docs/mongodb/overview/basic.md">Edit this doc on GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a><span data-updated-text="Last update: ">9/25/2022 07:00:42</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/database-guidebook/umi.js"></script>
  </body>
</html>
